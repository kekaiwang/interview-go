[toc]

## 1. http\https

## 2. OSI 模型

## 3. TCP/UDP

### 3.1 TCP 与 UDP 的区别

1. 
2. 
3. 
4. 

### 3.X 设计一个基于 UDP 的差不多可靠的算法

1. 数据完整性 –> 加上一个16或者32位的CRC验证字段
2. 乱序 –> 加上一个数据包序列号SEQ
3. 丢包 –> 需要确认和重传机制，就是和Tcp类似的Ack机制
4. 协议字段 –> protol 字段，标识当前使用协议

### 3. QUIC

`QUIC`(Quick UDP Internet Connections，快速UDP互联网连接)是Google提出的一种基于UDP改进的通信协议，其目的是降低网络通信的延迟，提供更好的用户互动体验。

`QUIC` 的主要特点包括：具有 `SPDY` (SPDY是谷歌研制的提升HTTP速度的协议，是HTTP/2.0的基础)所有的优点；`

- 0-RTT` 连接
- 减少丢包
- 前向纠错，减少重传时延
- 自适应拥塞控制， 减少重新连接
- 相当于 TLS 加密

1. **0RTT快速连接**

    - TCP最少需要花费1RTT的时间来建立连接。
    - TLS1.2下，首次建立连接，首先需要1次RTT建立连接（蓝色线），2次RTT交换密钥和加密策略（黑色线），然后开始通信。再次建立连接时，由于已缓存了密钥，因此少1次RTT。
    - TLS1.3和QUIC都采用了Diffie-Hellman密钥交换算法来交换密钥。该算法的优点是交换密钥只需要1次RTT。
    在QUIC下，只有首次建立连接交换密钥时消耗1RTT时间，再次连接时就是0RTT了。这已最大限度的减少握手延迟带来的影响。这个特性在连接延迟较大的移动网络上有较好的性能提升。

2. **连接迁移**
TCP下一个连接是以四元组标识的，即（SrcIp，SrcPort，DstIp，DstPort）。而QUIC连接是以客户端产生的一个64位随机数作为连接标识。当网络、端口发生改变或中断时，只要连接标识不改变，连接就不会中断。

3. **改进拥塞控制**
QUIC在应用层即可实现不同的拥塞控制算法，不需要改操作系统和内核。
单个程序的不同连接也能支持配置不同的拥塞控制。这样我们就可以给不同的用户提供更好的拥塞控制。
应用程序变更拥塞控制，甚至不需要停机和升级。
QUIC还有带宽预测，RTT监控，发送速率调整等高级算法支持。
4. **双级别流控**
TCP通过滑动窗口机制来保证可靠性以及进行流量控制。QUIC更新了其滑动窗口机制，并在Connection和Stream两个级别分别进行流控。
用公式表示就是：
**connection可用窗口 = stream1可用窗口 + stream2可用窗口 + streamN可用窗口**

5. 没有队头阻塞的多路复用
SDPY 和 HTTP2 协议的多路复用，是让所有请求在一个TCP连接上传输。前面说过，TCP协议有队头阻塞问题，如果某个资源的某个包丢失了，由于TCP是保证时序的，就会在接收端形成队头阻塞。TCP协议无法区分各个资源的包是否关联，因此会停止处理所有资源，直到丢包恢复。

    QUIC 是基于 UDP 的，UDP 不需要保证包的时序，因而不存在等待丢包恢复，不存在队头阻塞问题。如果某个资源的某个包丢失了，只会影响单个资源，其他资源会继续传输。

6. **实现与升级更灵活**
TCP协议栈是写在操作系统内核以及中间设备固件上的，对其更新升级，耗费的时间是以年为周期。
基于UDP协议栈的QUIC协议在应用层实现。应用软件的更新较为轻量，因此协议新特性的升级迭代周期是以月或周来计算。

## 4. IP

### 4.x ICMP

### 4.x PING 命令
